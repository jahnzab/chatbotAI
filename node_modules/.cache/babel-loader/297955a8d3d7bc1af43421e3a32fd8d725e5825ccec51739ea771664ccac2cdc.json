{"ast":null,"code":"import React,{useState,useRef}from\"react\";import axios from\"axios\";import\"./Llama.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Llamabot=()=>{const[userInput,setUserInput]=useState(\"\");const[chatLog,setChatLog]=useState([{role:\"assistant\",content:\"Hello! How can I assist you today?\"}]);const[isTyping,setIsTyping]=useState(false);const[isListening,setIsListening]=useState(false);const messagesEndRef=useRef(null);// Scroll to bottom function\nconst scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};// Speech Recognition Setup with Proper Check\nlet recognition=null;if(\"SpeechRecognition\"in window||\"webkitSpeechRecognition\"in window){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;recognition=new SpeechRecognition();recognition.continuous=false;recognition.lang=\"en-US\";recognition.onstart=()=>setIsListening(true);recognition.onend=()=>setIsListening(false);recognition.onresult=event=>{const transcript=event.results[0][0].transcript;setUserInput(transcript);};}else{console.warn(\"Speech recognition is not supported in this browser.\");}// Send message to FastAPI\nconst handleSendMessage=async()=>{if(!userInput.trim())return;const newChatLog=[...chatLog,{role:\"user\",content:userInput}];setChatLog(newChatLog);setUserInput(\"\");setIsTyping(true);try{const response=await axios.post(\"http://localhost:8000/generate/\",{question:userInput},// Corrected request format\n{headers:{\"Content-Type\":\"application/json\"}});const botResponse=response.data.answer;// Corrected response format\nsetChatLog([...newChatLog,{role:\"assistant\",content:botResponse}]);}catch(error){console.error(\"Error communicating with FastAPI:\",error);setChatLog([...newChatLog,{role:\"assistant\",content:\"Something went wrong. Please try again later.\"}]);}finally{setIsTyping(false);scrollToBottom();}};// Handle Enter key press\nconst handleKeyDown=e=>{if(e.key===\"Enter\"){handleSendMessage();}};// Start voice recognition\nconst startListening=()=>{if(recognition){recognition.start();}else{alert(\"Speech recognition is not supported in your browser.\");}};return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:\"550px\",height:\"88vh\",position:\"absolute\",left:\"450px\",top:\"70px\",backgroundColor:\"#2B2A33\",padding:\"10px\",color:\"white\",fontFamily:\"Arial, sans-serif\",borderRadius:\"10px\",boxSizing:\"border-box\",display:\"flex\",flexDirection:\"column\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\"},children:\"Jahanzaib's Chatbot\"}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:\"auto\",marginTop:\"10px\"},children:[chatLog.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:msg.role===\"user\"?\"flex-end\":\"flex-start\",marginBottom:\"10px\"},children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"black\",color:\"white\",padding:\"10px\",borderRadius:\"10px\",maxWidth:msg.role===\"user\"?\"35%\":\"80%\",textAlign:\"left\",wordWrap:\"break-word\",overflowWrap:\"break-word\"},children:msg.content})},index)),isTyping&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"gray\",marginBottom:\"10px\"},children:\"Assistant is typing...\"}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",backgroundColor:\"#2B2A33\",borderRadius:\"10px\",padding:\"10px\",boxShadow:\"0px 2px 5px rgba(0, 0, 0, 0.2)\",marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userInput,onChange:e=>setUserInput(e.target.value),onKeyDown:handleKeyDown,style:{flex:1,padding:\"10px\",borderRadius:\"5px\",border:\"1px solid #ccc\",backgroundColor:\"black\",color:\"white\"},placeholder:\"HOW CAN I HELP YOU...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,style:{marginLeft:\"10px\",padding:\"10px 15px\",borderRadius:\"5px\",backgroundColor:\"#007BFF\",color:\"#fff\",border:\"none\",cursor:\"pointer\"},children:\"Send\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startListening,style:{marginLeft:\"10px\",padding:\"10px 15px\",borderRadius:\"5px\",backgroundColor:isListening?\"red\":\"#28A745\",color:\"#fff\",border:\"none\",cursor:\"pointer\"},children:isListening?\"Listening...\":\"Start Listening\"})]})]})});};export default Llamabot;","map":{"version":3,"names":["React","useState","useRef","axios","jsx","_jsx","jsxs","_jsxs","Llamabot","userInput","setUserInput","chatLog","setChatLog","role","content","isTyping","setIsTyping","isListening","setIsListening","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","recognition","window","SpeechRecognition","webkitSpeechRecognition","continuous","lang","onstart","onend","onresult","event","transcript","results","console","warn","handleSendMessage","trim","newChatLog","response","post","question","headers","botResponse","data","answer","error","handleKeyDown","e","key","startListening","start","alert","style","display","children","width","height","position","left","top","backgroundColor","padding","color","fontFamily","borderRadius","boxSizing","flexDirection","margin","textAlign","flex","overflowY","marginTop","map","msg","index","justifyContent","marginBottom","maxWidth","wordWrap","overflowWrap","ref","boxShadow","type","value","onChange","target","onKeyDown","border","placeholder","onClick","marginLeft","cursor"],"sources":["/home/jahanzaib/Desktop/chatgit/src/Llamabot.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./Llama.css\";\n\nconst Llamabot = () => {\n  const [userInput, setUserInput] = useState(\"\");\n  const [chatLog, setChatLog] = useState([\n    { role: \"assistant\", content: \"Hello! How can I assist you today?\" },\n  ]);\n  const [isTyping, setIsTyping] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  // Scroll to bottom function\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  // Speech Recognition Setup with Proper Check\n  let recognition = null;\n  if (\"SpeechRecognition\" in window || \"webkitSpeechRecognition\" in window) {\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n    recognition = new SpeechRecognition();\n    recognition.continuous = false;\n    recognition.lang = \"en-US\";\n\n    recognition.onstart = () => setIsListening(true);\n    recognition.onend = () => setIsListening(false);\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setUserInput(transcript);\n    };\n  } else {\n    console.warn(\"Speech recognition is not supported in this browser.\");\n  }\n\n  // Send message to FastAPI\n  const handleSendMessage = async () => {\n    if (!userInput.trim()) return;\n\n    const newChatLog = [...chatLog, { role: \"user\", content: userInput }];\n    setChatLog(newChatLog);\n    setUserInput(\"\");\n    setIsTyping(true);\n\n    try {\n      const response = await axios.post(\n        \"http://localhost:8000/generate/\",\n        { question: userInput }, // Corrected request format\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      const botResponse = response.data.answer; // Corrected response format\n      setChatLog([...newChatLog, { role: \"assistant\", content: botResponse }]);\n    } catch (error) {\n      console.error(\"Error communicating with FastAPI:\", error);\n      setChatLog([\n        ...newChatLog,\n        { role: \"assistant\", content: \"Something went wrong. Please try again later.\" },\n      ]);\n    } finally {\n      setIsTyping(false);\n      scrollToBottom();\n    }\n  };\n\n  // Handle Enter key press\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      handleSendMessage();\n    }\n  };\n\n  // Start voice recognition\n  const startListening = () => {\n    if (recognition) {\n      recognition.start();\n    } else {\n      alert(\"Speech recognition is not supported in your browser.\");\n    }\n  };\n\n  return (\n    <div style={{ display: \"flex\" }}>\n      {/* Left side container */}\n      <div\n        style={{\n          width: \"550px\",\n          height: \"88vh\",\n          position: \"absolute\",\n          left: \"450px\",\n          top: \"70px\",\n          backgroundColor: \"#2B2A33\",\n          padding: \"10px\",\n          color: \"white\",\n          fontFamily: \"Arial, sans-serif\",\n          borderRadius: \"10px\",\n          boxSizing: \"border-box\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          margin: \"10px\",\n        }}\n      >\n        <h1 style={{ textAlign: \"center\" }}>Jahanzaib's Chatbot</h1>\n\n        <div style={{ flex: 1, overflowY: \"auto\", marginTop: \"10px\" }}>\n          {chatLog.map((msg, index) => (\n            <div\n              key={index}\n              style={{\n                display: \"flex\",\n                justifyContent: msg.role === \"user\" ? \"flex-end\" : \"flex-start\",\n                marginBottom: \"10px\",\n              }}\n            >\n              <div\n                style={{\n                  backgroundColor: \"black\",\n                  color: \"white\",\n                  padding: \"10px\",\n                  borderRadius: \"10px\",\n                  maxWidth: msg.role === \"user\" ? \"35%\" : \"80%\",\n                  textAlign: \"left\",\n                  wordWrap: \"break-word\",\n                  overflowWrap: \"break-word\",\n                }}\n              >\n                {msg.content}\n              </div>\n            </div>\n          ))}\n          {isTyping && (\n            <div style={{ color: \"gray\", marginBottom: \"10px\" }}>\n              Assistant is typing...\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        <div\n          style={{\n            display: \"flex\",\n            backgroundColor: \"#2B2A33\",\n            borderRadius: \"10px\",\n            padding: \"10px\",\n            boxShadow: \"0px 2px 5px rgba(0, 0, 0, 0.2)\",\n            marginTop: \"10px\",\n          }}\n        >\n          <input\n            type=\"text\"\n            value={userInput}\n            onChange={(e) => setUserInput(e.target.value)}\n            onKeyDown={handleKeyDown}\n            style={{\n              flex: 1,\n              padding: \"10px\",\n              borderRadius: \"5px\",\n              border: \"1px solid #ccc\",\n              backgroundColor: \"black\",\n              color: \"white\",\n            }}\n            placeholder=\"HOW CAN I HELP YOU...\"\n          />\n          <button\n            onClick={handleSendMessage}\n            style={{\n              marginLeft: \"10px\",\n              padding: \"10px 15px\",\n              borderRadius: \"5px\",\n              backgroundColor: \"#007BFF\",\n              color: \"#fff\",\n              border: \"none\",\n              cursor: \"pointer\",\n            }}\n          >\n            Send\n          </button>\n          <button\n            onClick={startListening}\n            style={{\n              marginLeft: \"10px\",\n              padding: \"10px 15px\",\n              borderRadius: \"5px\",\n              backgroundColor: isListening ? \"red\" : \"#28A745\",\n              color: \"#fff\",\n              border: \"none\",\n              cursor: \"pointer\",\n            }}\n          >\n            {isListening ? \"Listening...\" : \"Start Listening\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Llamabot;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErB,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,CACrC,CAAEY,IAAI,CAAE,WAAW,CAAEC,OAAO,CAAE,oCAAqC,CAAC,CACrE,CAAC,CACF,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACgB,WAAW,CAAEC,cAAc,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAAkB,cAAc,CAAGjB,MAAM,CAAC,IAAI,CAAC,CAEnC;AACA,KAAM,CAAAkB,cAAc,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAC3B,CAAAA,qBAAA,CAAAF,cAAc,CAACG,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAED;AACA,GAAI,CAAAC,WAAW,CAAG,IAAI,CACtB,GAAI,mBAAmB,EAAI,CAAAC,MAAM,EAAI,yBAAyB,EAAI,CAAAA,MAAM,CAAE,CACxE,KAAM,CAAAC,iBAAiB,CACrBD,MAAM,CAACC,iBAAiB,EAAID,MAAM,CAACE,uBAAuB,CAC5DH,WAAW,CAAG,GAAI,CAAAE,iBAAiB,CAAC,CAAC,CACrCF,WAAW,CAACI,UAAU,CAAG,KAAK,CAC9BJ,WAAW,CAACK,IAAI,CAAG,OAAO,CAE1BL,WAAW,CAACM,OAAO,CAAG,IAAMb,cAAc,CAAC,IAAI,CAAC,CAChDO,WAAW,CAACO,KAAK,CAAG,IAAMd,cAAc,CAAC,KAAK,CAAC,CAC/CO,WAAW,CAACQ,QAAQ,CAAIC,KAAK,EAAK,CAChC,KAAM,CAAAC,UAAU,CAAGD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACD,UAAU,CACjDzB,YAAY,CAACyB,UAAU,CAAC,CAC1B,CAAC,CACH,CAAC,IAAM,CACLE,OAAO,CAACC,IAAI,CAAC,sDAAsD,CAAC,CACtE,CAEA;AACA,KAAM,CAAAC,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CAAC9B,SAAS,CAAC+B,IAAI,CAAC,CAAC,CAAE,OAEvB,KAAM,CAAAC,UAAU,CAAG,CAAC,GAAG9B,OAAO,CAAE,CAAEE,IAAI,CAAE,MAAM,CAAEC,OAAO,CAAEL,SAAU,CAAC,CAAC,CACrEG,UAAU,CAAC6B,UAAU,CAAC,CACtB/B,YAAY,CAAC,EAAE,CAAC,CAChBM,WAAW,CAAC,IAAI,CAAC,CAEjB,GAAI,CACF,KAAM,CAAA0B,QAAQ,CAAG,KAAM,CAAAvC,KAAK,CAACwC,IAAI,CAC/B,iCAAiC,CACjC,CAAEC,QAAQ,CAAEnC,SAAU,CAAC,CAAE;AACzB,CACEoC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGJ,QAAQ,CAACK,IAAI,CAACC,MAAM,CAAE;AAC1CpC,UAAU,CAAC,CAAC,GAAG6B,UAAU,CAAE,CAAE5B,IAAI,CAAE,WAAW,CAAEC,OAAO,CAAEgC,WAAY,CAAC,CAAC,CAAC,CAC1E,CAAE,MAAOG,KAAK,CAAE,CACdZ,OAAO,CAACY,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzDrC,UAAU,CAAC,CACT,GAAG6B,UAAU,CACb,CAAE5B,IAAI,CAAE,WAAW,CAAEC,OAAO,CAAE,+CAAgD,CAAC,CAChF,CAAC,CACJ,CAAC,OAAS,CACRE,WAAW,CAAC,KAAK,CAAC,CAClBI,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,CAED;AACA,KAAM,CAAA8B,aAAa,CAAIC,CAAC,EAAK,CAC3B,GAAIA,CAAC,CAACC,GAAG,GAAK,OAAO,CAAE,CACrBb,iBAAiB,CAAC,CAAC,CACrB,CACF,CAAC,CAED;AACA,KAAM,CAAAc,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI5B,WAAW,CAAE,CACfA,WAAW,CAAC6B,KAAK,CAAC,CAAC,CACrB,CAAC,IAAM,CACLC,KAAK,CAAC,sDAAsD,CAAC,CAC/D,CACF,CAAC,CAED,mBACElD,IAAA,QAAKmD,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,cAE9BnD,KAAA,QACEiD,KAAK,CAAE,CACLG,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,QAAQ,CAAE,UAAU,CACpBC,IAAI,CAAE,OAAO,CACbC,GAAG,CAAE,MAAM,CACXC,eAAe,CAAE,SAAS,CAC1BC,OAAO,CAAE,MAAM,CACfC,KAAK,CAAE,OAAO,CACdC,UAAU,CAAE,mBAAmB,CAC/BC,YAAY,CAAE,MAAM,CACpBC,SAAS,CAAE,YAAY,CACvBZ,OAAO,CAAE,MAAM,CACfa,aAAa,CAAE,QAAQ,CACvBC,MAAM,CAAE,MACV,CAAE,CAAAb,QAAA,eAEFrD,IAAA,OAAImD,KAAK,CAAE,CAAEgB,SAAS,CAAE,QAAS,CAAE,CAAAd,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAE5DnD,KAAA,QAAKiD,KAAK,CAAE,CAAEiB,IAAI,CAAE,CAAC,CAAEC,SAAS,CAAE,MAAM,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAjB,QAAA,EAC3D/C,OAAO,CAACiE,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBACtBzE,IAAA,QAEEmD,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfsB,cAAc,CAAEF,GAAG,CAAChE,IAAI,GAAK,MAAM,CAAG,UAAU,CAAG,YAAY,CAC/DmE,YAAY,CAAE,MAChB,CAAE,CAAAtB,QAAA,cAEFrD,IAAA,QACEmD,KAAK,CAAE,CACLQ,eAAe,CAAE,OAAO,CACxBE,KAAK,CAAE,OAAO,CACdD,OAAO,CAAE,MAAM,CACfG,YAAY,CAAE,MAAM,CACpBa,QAAQ,CAAEJ,GAAG,CAAChE,IAAI,GAAK,MAAM,CAAG,KAAK,CAAG,KAAK,CAC7C2D,SAAS,CAAE,MAAM,CACjBU,QAAQ,CAAE,YAAY,CACtBC,YAAY,CAAE,YAChB,CAAE,CAAAzB,QAAA,CAEDmB,GAAG,CAAC/D,OAAO,CACT,CAAC,EApBDgE,KAqBF,CACN,CAAC,CACD/D,QAAQ,eACPV,IAAA,QAAKmD,KAAK,CAAE,CAAEU,KAAK,CAAE,MAAM,CAAEc,YAAY,CAAE,MAAO,CAAE,CAAAtB,QAAA,CAAC,wBAErD,CAAK,CACN,cACDrD,IAAA,QAAK+E,GAAG,CAAEjE,cAAe,CAAE,CAAC,EACzB,CAAC,cAENZ,KAAA,QACEiD,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfO,eAAe,CAAE,SAAS,CAC1BI,YAAY,CAAE,MAAM,CACpBH,OAAO,CAAE,MAAM,CACfoB,SAAS,CAAE,gCAAgC,CAC3CV,SAAS,CAAE,MACb,CAAE,CAAAjB,QAAA,eAEFrD,IAAA,UACEiF,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE9E,SAAU,CACjB+E,QAAQ,CAAGrC,CAAC,EAAKzC,YAAY,CAACyC,CAAC,CAACsC,MAAM,CAACF,KAAK,CAAE,CAC9CG,SAAS,CAAExC,aAAc,CACzBM,KAAK,CAAE,CACLiB,IAAI,CAAE,CAAC,CACPR,OAAO,CAAE,MAAM,CACfG,YAAY,CAAE,KAAK,CACnBuB,MAAM,CAAE,gBAAgB,CACxB3B,eAAe,CAAE,OAAO,CACxBE,KAAK,CAAE,OACT,CAAE,CACF0B,WAAW,CAAC,uBAAuB,CACpC,CAAC,cACFvF,IAAA,WACEwF,OAAO,CAAEtD,iBAAkB,CAC3BiB,KAAK,CAAE,CACLsC,UAAU,CAAE,MAAM,CAClB7B,OAAO,CAAE,WAAW,CACpBG,YAAY,CAAE,KAAK,CACnBJ,eAAe,CAAE,SAAS,CAC1BE,KAAK,CAAE,MAAM,CACbyB,MAAM,CAAE,MAAM,CACdI,MAAM,CAAE,SACV,CAAE,CAAArC,QAAA,CACH,MAED,CAAQ,CAAC,cACTrD,IAAA,WACEwF,OAAO,CAAExC,cAAe,CACxBG,KAAK,CAAE,CACLsC,UAAU,CAAE,MAAM,CAClB7B,OAAO,CAAE,WAAW,CACpBG,YAAY,CAAE,KAAK,CACnBJ,eAAe,CAAE/C,WAAW,CAAG,KAAK,CAAG,SAAS,CAChDiD,KAAK,CAAE,MAAM,CACbyB,MAAM,CAAE,MAAM,CACdI,MAAM,CAAE,SACV,CAAE,CAAArC,QAAA,CAEDzC,WAAW,CAAG,cAAc,CAAG,iBAAiB,CAC3C,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAT,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}